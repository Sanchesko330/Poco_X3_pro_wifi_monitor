# Poco_X3_pro_wifi_monitor
Инструкция по включению режима мониторинга встроенного WiFi адаптера в Poco X3 Pro. 

Способ по включению придумал не я.
Первоисточник: https://github.com/kimocoder/qualcomm_android_monitor_mode

В данном репозитории отдельно выделена информация касаемо только Poco X3 Pro. В первоисточнике часть информации не подходит в случае с Poco X3 Pro.


# Начальные требования

1. Root права
2. Magisk
3. Termux

# Параметры смартфона, на котором удалось включить monitor mode

1. Прошивка MIUI Global 14.0.1
2. Ядро v4.14.334-Nethunter
3. Magisk 28.1
Вероятнее всего метод сработает и на стоковом ядре, так как принципиальных отличий обнаружено не было.

# Этапы включения монитор мода

## 1. Проверка текущего адаптера
В termux логинимся в рута, смотрим, какой wlan подключен в WiFi
![image](https://github.com/user-attachments/assets/286f03bf-f28e-4640-8d2d-e87d43250088)
У меня это Wlan0

## 2. Включение монитор мода
Конфиг, отвечающий за режим работы адаптера находится по пути `/sys/module/wlan/parameters/con_mode`. 
Перед его изменением надо отключить адаптер:
```
svc wifi disable
ip link set wlan0 down
```
Изменить параметр конфига можно командой или через редактор:
```
echo "4" > /sys/module/wlan/parameters/con_mode
```
Далее включаем адаптер:
```
svc wifi enable
ip link set wlan0 up
```
Вернуть значение  обратно:
```
echo "0" > /sys/module/wlan/parameters/con_mode
```

Можно воспользоваться приложением `Monitorer`. Он делает все тоже самое по нажатию одной кнопки.

После выполнение команды по изменению конфига в выводе команды `iw dev` мы увидим, что режим поменялся на `monitor`.

## 3. Проверка работоспособности.
Для проверки использовался airodump-ng.
Команда для запуска:
```
airodump-ng wlan0
```
После запуска команды будут видны точки доступа рядом:
![image](https://github.com/user-attachments/assets/0e336e7c-c7b5-4ff7-aba3-40887858b028)

В режиме перехвата рукопожатия, если просто указать канал сети через `-c` airodump-ng выведет предупреждение, что он находится на канале `-1`. Из-за этого хендшейк не будет перехвачен. Есть два решение этой проблемы.
1. Не указывать канал вручную. Из-за этого сильно уменьшиться шанс захвата рукопожатия.
```
airodump-ng --bssid 00:00:00:00:00:00 -w dump wlan0
```
2. Указать дополнительный параметр `--ignore-negative-one`. В этом случае ошибка не будет отображаться(так как просто игнорируется). Но захват рукопожатия будет происходить в выбранном канале. Тестировал захват рукопожатия таким способом 10 раз. Во всех случаях оно было перехвачено с первого раза.
```
airodump-ng -c2 --ignore-negative-one --bssid 00:00:00:00:00:00 -w dump wlan0
```
![image](https://github.com/user-attachments/assets/408b4d36-ffbf-46a1-a7c1-f0813a9f28e6)



